&НаКлиенте
Процедура Готово(Команда)
	Если ПустаяСтрока(Логин) Тогда
		ПоказатьПредупреждение(, НСтр("ru='Заполните поле с логином!'"));
		Возврат;
	КонецЕсли;
	
	// Проверка пароля
	Если ПустаяСтрока(Пароль) Тогда
		ПоказатьПредупреждение(, НСтр("ru='Заполните поле с паролем!'"));
		Возврат;
	КонецЕсли;
	
	// Проверка длины пароля и наличия букв, цифр и спецсимволов
	Если СтрДлина(Пароль) < 8 Тогда
		ПоказатьПредупреждение(, НСтр("ru='Пароль должен содержать минимум 8 символов!'"));
		Возврат;
	КонецЕсли;
	
	// Проверка наличия букв, цифр и спецсимволов
	ЕстьБуквы = Ложь;
	ЕстьЦифры = Ложь;
	ЕстьСпецсимволы = Ложь;
	Спецсимволы = "!@#$%^&*()_+-=[]{}|;:,.<>?";
	
	Для НомерСимвола = 1 По СтрДлина(Пароль) Цикл
		ТекущийСимвол = Сред(Пароль, НомерСимвола, 1);
		Код = КодСимвола(ТекущийСимвол);
		
		// Проверка на буквы (А-Я, а-я, A-Z, a-z)
		Если (Код >= 1040 И Код <= 1103) // Русские буквы А-Я, а-я
			Или (Код >= 65 И Код <= 90) // Английские буквы A-Z
			Или (Код >= 97 И Код <= 122) Тогда // Английские буквы a-z
			ЕстьБуквы = Истина;
		// Проверка на цифры (0-9)
		ИначеЕсли Код >= 48 И Код <= 57 Тогда
			ЕстьЦифры = Истина;
		// Проверка на спецсимволы
		ИначеЕсли Найти(Спецсимволы, ТекущийСимвол) > 0 Тогда
			ЕстьСпецсимволы = Истина;
		КонецЕсли;
	КонецЦикла;
	
	Если НЕ ЕстьБуквы Тогда
		ПоказатьПредупреждение(, НСтр("ru='Пароль должен содержать хотя бы одну букву!'"));
		Возврат;
	КонецЕсли;
	
	Если НЕ ЕстьЦифры Тогда
		ПоказатьПредупреждение(, НСтр("ru='Пароль должен содержать хотя бы одну цифру!'"));
		Возврат;
	КонецЕсли;
	
	Если НЕ ЕстьСпецсимволы Тогда
		ПоказатьПредупреждение(, НСтр("ru='Пароль должен содержать хотя бы один специальный символ (!@#$%^&*()_+-=[]{}|;:,.<>?)!'"));
		Возврат;
	КонецЕсли;

	Если ПустаяСтрока(Роль) Тогда
		ПоказатьПредупреждение(, НСтр("ru='Заполните поле с ролью!'"));
		Возврат;
	КонецЕсли;
			
	РезультатОТвета = СервисАвторизации.РегистрацияНаСервере(Пароль, Логин, Роль);
	
	Закрыть();
	
	Если ПустаяСтрока(РезультатОТвета) Тогда
		ПоказатьПредупреждение(, НСтр("ru='Ошибка регистрации, регистрация возможно только при доступе к сети!'"));	
	Иначе
		Сообщить(РезультатОТвета);	
	КонецЕсли;
	
КонецПроцедуры

&НаКлиенте
Процедура ВернутьсяВПанельВхода(Команда)
	Закрыть();
КонецПроцедуры